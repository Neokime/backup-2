{% extends "base.html" %}
{% block content %}

<h2>통계 분석 (상관관계 · Heatmap)</h2>

<br>

<div class="row g-3">

  <div class="col">
    <div class="card p-3">
      <small>평균 행복 지수</small>
      <h3>{{ avg_happiness }}</h3>
    </div>
  </div>

  <div class="col">
    <div class="card p-3">
      <small>건강 ↔ 행복지수 상관계수</small>
      <h3>{{ corr_health }}</h3>
    </div>
  </div>

  <div class="col">
    <div class="card p-3">
      <small>재정상태 ↔ 행복지수 상관계수</small>
      <h3 class="text-danger">{{ corr_financial }}</h3>
    </div>
  </div>

  <div class="col">
    <div class="card p-3">
      <small>데이터 업데이트</small>
      <h3>{{ updated_at }}</h3>
    </div>
  </div>

</div>

<br>

<h5>상관계수 표</h5>

<table class="table table-bordered text-center">

  <thead>
    <tr>
      <th></th>
      {% for col in corr_labels %}
        <th>{{ col }}</th>
      {% endfor %}
    </tr>
  </thead>

  <tbody>
  {% for row in corr_table %}
    <tr>

      <!-- 행 이름 -->
      <th>{{ row.label }}</th>

      <!-- 값 리스트 반복 -->
      {% for v in row.values %}
        <td>{{ v|floatformat:2 }}</td>
      {% endfor %}

    </tr>
  {% endfor %}
  </tbody>

</table>

<br>

<h5>상관관계 Heatmap</h5>

<img src="{{ heatmap_url }}" class="img-fluid rounded shadow">

{% endblock %}
